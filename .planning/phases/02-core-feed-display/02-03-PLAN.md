---
phase: 02-core-feed-display
plan: 03
type: execute
wave: 3
depends_on: ["02-02"]
files_modified:
  - app/page.tsx
  - app/layout.tsx
autonomous: false

must_haves:
  truths:
    - "Main page displays the real-time event feed"
    - "Header with connection status is always visible at top"
    - "Feed fills available viewport height below header"
    - "Page works on mobile and desktop viewports"
    - "Events appear in real-time when Claude Code is active"
  artifacts:
    - path: "app/page.tsx"
      provides: "Main page composing Header and EventFeed"
      min_lines: 15
  key_links:
    - from: "app/page.tsx"
      to: "app/components/ui/Header.tsx"
      via: "import and render"
      pattern: "import.*Header"
    - from: "app/page.tsx"
      to: "app/components/feed/EventFeed.tsx"
      via: "import and render"
      pattern: "import.*EventFeed"
---

<objective>
Integrate all components into the main page and verify the complete feed works.

Purpose: Compose Header and EventFeed into the main page, ensuring proper layout and real-time functionality. Then verify visually that everything works together.

Output: Working main page with live event feed, verified by user testing.
</objective>

<execution_context>
@/Users/alexander.buss/.claude/get-shit-done/workflows/execute-plan.md
@/Users/alexander.buss/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/02-core-feed-display/02-CONTEXT.md
@app/layout.tsx
@app/components/ui/Header.tsx
@app/components/feed/EventFeed.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create main page with Header and EventFeed</name>
  <files>app/page.tsx</files>
  <action>
Replace the default Next.js starter page with the feed page:

1. Make it a client component since it composes client components:
   - "use client" directive at top

2. Import components:
   - Header from "@/app/components/ui/Header"
   - EventFeed from "@/app/components/feed/EventFeed"

3. Create full-height layout:
   ```tsx
   export default function Home() {
     return (
       <div className="flex flex-col h-screen bg-background">
         <Header />
         <main className="flex-1 overflow-hidden">
           <EventFeed />
         </main>
       </div>
     );
   }
   ```

4. Key layout considerations:
   - h-screen for full viewport height
   - flex flex-col to stack header and main
   - Header is sticky (handled by Header component)
   - main is flex-1 to fill remaining space
   - overflow-hidden on main to contain EventFeed scroll

5. bg-background uses the CSS variable from globals.css (#0a0a0a)
  </action>
  <verify>
- `bun run build` passes
- app/page.tsx imports Header and EventFeed
- Page uses full-height layout
  </verify>
  <done>Main page displays Header at top with EventFeed filling remaining viewport</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete real-time event feed with:
- Dark mode (#0a0a0a background)
- Header with "agentstype.dev" title and connection status indicator
- Real-time event stream from Convex
- Colored left borders (green=read, blue=write, orange=bash, red=error)
- Relative timestamps with absolute time on hover
- Auto-scroll to new events (when at bottom)
- "X new events" floating badge (when scrolled up)
- New event entrance animations
  </what-built>
  <how-to-verify>
1. Start the dev servers:
   ```bash
   bunx convex dev  # In terminal 1
   bun dev          # In terminal 2
   ```

2. Open http://localhost:3000 in browser

3. Check visual appearance:
   - [ ] Dark background (#0a0a0a, near-black)
   - [ ] Header at top with "agentstype.dev" and status indicator
   - [ ] Connection status shows "Live" with green pulsing dot (or "Reconnecting"/"Offline" if issues)
   - [ ] Monospace typography throughout

4. Check event display (if events exist from Phase 1 testing):
   - [ ] Events show with colored left borders
   - [ ] Timestamps show relative time (e.g., "2 min ago")
   - [ ] Hovering timestamp shows absolute time
   - [ ] Scrolling up shows "X new events" badge when new events arrive

5. Test real-time updates (optional but recommended):
   - Use Claude Code in another project with the hook installed
   - [ ] Events appear within seconds
   - [ ] New events animate in with fade/slide
   - [ ] Auto-scrolls to new events if at bottom

6. Check responsive:
   - [ ] Works on mobile viewport (resize browser)
   - [ ] Header stays at top
   - [ ] Feed scrolls properly

If no events exist yet, the empty state should show "No events yet" message.
  </how-to-verify>
  <resume-signal>Type "approved" if feed works correctly, or describe any issues to fix</resume-signal>
</task>

</tasks>

<verification>
Phase 2 complete when:
1. Main page displays Header and EventFeed
2. Connection status indicator works
3. Events display with correct styling
4. Real-time updates work (events appear as they're captured)
5. User verifies visual appearance
</verification>

<success_criteria>
- Events appear in the feed within seconds of capture (real-time)
- Connection status shows "Live" / "Reconnecting..." / "Offline"
- Event types are visually distinct with colored borders
- Timestamps show relative ("2 min ago") and absolute on hover
- Dark mode styling with monospace typography
- Auto-scroll and new event indicator work correctly
</success_criteria>

<output>
After completion, create `.planning/phases/02-core-feed-display/02-03-SUMMARY.md`
</output>
